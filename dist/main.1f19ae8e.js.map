{"version":3,"sources":["scripts/lineChartView.js","scripts/datePicker.js","scripts/mapGermany.js","main.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["svg","xAxis","yAxis","blDomainStorage","currentMonth","margin","top","right","bottom","left","width","height","VisualiseChosenBL","selectedBl","checked","selectedMonth","foundBL","foundMonth","console","log","forEach","arr","i","splice","fetchData","then","data","neededYValue","d3","scaleLinear","domain","max","item","Infos","AnzahlFall","sort","a","b","length","select","remove","addAxes","push","Bundesland","blClassN","visualiseCurve","updateExistingCurvesCircles","selectAll","InitializeSVG","append","classed","attr","bundesland","fetch","method","response","json","casesData","feed","features","elem","attributes","groupDataByDate","groupedReport","reduce","dataEntries","currentValue","day","Date","undefined","IdBundesland","reportArr","Object","entries","key","value","Meldedatum","scaleTime","extent","range","xA","axisBottom","tickSizeOuter","parseDate","timeFormat","tickFormat","d","call","style","nice","axisLeft","formattedData","classN","color","datum","line","x","y","text","enter","appendVerticalLine","date","storageArray","ToggleDatePicker","event","target","matches","dropdowns","document","getElementsByClassName","openDropdown","classList","contains","add","getElementById","toggle","datePicked","month","textContent","GetDateForFetch","colorBackground","colorText","blHoovered","labelBlArray","clickedBlArray","LoadMap","geojson","projection","geoMercator","fitSize","path","geoPath","scaleOrdinal","schemeBlues","slice","offset","properties","GEN","bl","textBool","includes","on","highlightBl","resetBlColor","clickEvent","display","_groups","id","isBlClicked","clickedBl","clickedBool","index","indexOf","alert","mapButton","datePickerButton","dateButton","selectedBL","InitialiseEvents","eventListenerMap","eventListenerDatePicker","addEventListener","Array","prototype","updateLineChart","mapButtonClicked","visualizeSelectedBl","mapSelectedBl","getElementsByTagName","observer","MutationObserver","mutations","mutation","attributeName","config","blMap","observe","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["let svg, xAxis, yAxis;\r\nconst blDomainStorage = [];\r\nvar currentMonth; \r\n\r\nconst margin = {top:10, right: 30, bottom: 60, left: 60},\r\n  width = 800 - margin.left - margin.right,\r\n  height = 400 - margin.top - margin.bottom;\r\n\r\n/** Saves the checked Bundesländer to the array `blDomainStorage` \r\n  and visualises the chosen Bundesland.\r\n*/\r\nexport function VisualiseChosenBL(selectedBl, checked, selectedMonth){      \r\n  let foundBL = false;\r\n  let foundMonth = false;\r\n  console.log(selectedBl);\r\n  blDomainStorage.forEach(arr => {\r\n    if(selectedBl == arr[0]){\r\n      foundBL = true;\r\n      \r\n    } \r\n  })\r\n  if(selectedMonth == currentMonth) {\r\n    foundMonth = true;\r\n    currentMonth = selectedMonth;\r\n  }\r\n\r\n  // Checks if Bundesland is newly checked or if it already exists in blDomainStorage\r\n  if(foundBL == false || foundMonth == false){\r\n    console.log(\"In LineChart\");\r\n    if(foundBL ==true){\r\n      blDomainStorage.forEach((arr, i) => {\r\n        if(arr[0] == selectedBl) {\r\n         blDomainStorage.splice(i,1)\r\n        }\r\n      })\r\n    }\r\n \r\n    // Fetching the data of the newly selected Bundesland\r\n    fetchData(selectedBl, selectedMonth).then((data) => {\r\n      // To figure out the max y-value which is necessary to correctly display the data\r\n      const neededYValue = d3.scaleLinear().domain([0, d3.max(data, item => item.Infos.AnzahlFall)])\r\n\r\n      /** Sorts the array in increasing order.\r\n        The Bundesland with the smallest needed y-value comes first and the one with the highest comes last.\r\n      */\r\n      blDomainStorage.sort((a,b) => {\r\n        return a[1] - b[1];\r\n      })\r\n\r\n      /** Checks whether the last Bundesland in `blDomainStorage` still obtains the highest needed\r\n        y-value compared to the newly selected Bundesland. If the newly checked Bundesland has\r\n        more Covid cases and therefore needs a higher y-value the current axes are removed \r\n        and the updated ones are added.\r\n      */\r\n    \r\n      if(blDomainStorage.length == 0 || blDomainStorage[blDomainStorage.length-1][1] < neededYValue.domain()[1]){\r\n        console.log(blDomainStorage);\r\n        svg.select(\".y-axis\").remove(); // instead of deleting they should be updated,\r\n        svg.select(\".x-axis\").remove(); // but that seems more complicated\r\n        svg.select(\".case-line\").remove(); //removes existing vertical line\r\n        addAxes(data);\r\n      }\r\n    \r\n      // Stores the Bundesland and the highest y-value needed for that Bundesland\r\n      blDomainStorage.push([data[0].Infos.Bundesland, neededYValue.domain()[1]]);   \r\n\r\n      /** The curve of the newly selected Bundesland is added.\r\n        `blClassN` is necessary to give each curve a distinguishable class name.\r\n        It will be used to select the d3 element and then to update and delete it.\r\n      */\r\n      const blClassN = data[0].Infos.Bundesland\r\n      visualiseCurve(svg, data, xAxis, yAxis, blClassN, \"turquoise\");\r\n\r\n      // Circles of the already displayed Bundesländer are updated according to the new axis. \r\n      updateExistingCurvesCircles(blDomainStorage);\r\n    })\r\n    \r\n  } else if(!checked && foundBL == true) { // If Bundesland isn't selected but found in `blDomainStorage`\r\n\r\n      // Removes the curve and circles of the recently unselected Bundesland.\r\n      svg.select(\".curve.\"+selectedBl).remove();\r\n      svg.selectAll(\".circles.\"+selectedBl).remove();\r\n\r\n     /** Sorts the array in increasing order.\r\n        The Bundesland with the smallest needed y-value comes first and the one with the \r\n        highest comes last.\r\n      */\r\n      blDomainStorage.sort((a,b) => {\r\n        return a[1] - b[1];\r\n      })\r\n\r\n      // Removes the recently unselected Bundesland from `blDomainStorage`\r\n      blDomainStorage.forEach((arr, i) => {\r\n        if(arr[0] == selectedBl) {\r\n         blDomainStorage.splice(i,1)\r\n        }\r\n      })\r\n\r\n      /** Updates the axes, the existing curves and circles if the highest needed y-value \r\n        has changed after unselecting a Bundesland\r\n      */\r\n      if(yAxis.domain()[1] > blDomainStorage[blDomainStorage.length-1][1]){\r\n        fetchData(blDomainStorage[blDomainStorage.length-1][0], selectedMonth).then((data) => {\r\n          svg.select(\".y-axis\").remove(); \r\n          svg.select(\".x-axis\").remove(); \r\n          svg.select(\".case-line\").remove(); //removes existing vertical line\r\n          addAxes(data)\r\n          updateExistingCurvesCircles(blDomainStorage);            \r\n        }) \r\n      } \r\n    }\r\n}\r\n\r\n\r\nexport function InitializeSVG(){\r\n  svg = d3.select(\"#lineChartContainer\")\r\n          .append(\"div\")\r\n          .classed(\"svg-container\", true) \r\n          .append(\"svg\")\r\n          .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\r\n          .attr(\"viewBox\", \"0 0 600 400\")\r\n          .classed(\"svg-content-responsive\", true)\r\n          .append(\"g\")\r\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);             \r\n}\r\n\r\n\r\nfunction fetchData(bundesland, selectedMonth){\r\n    return fetch(\r\n      `https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0/query?where=Meldedatum%20%3E%3D%20TIMESTAMP%20%27${selectedMonth[0]}%2000%3A00%3A00%27%20AND%20Meldedatum%20%3C%3D%20TIMESTAMP%20%27${selectedMonth[1]}%2000%3A00%3A00%27%20AND%20Bundesland%20%3D%20%27${bundesland}%27&outFields=Bundesland,AnzahlFall,Meldedatum,IdBundesland&outSR=4326&f=json`,\r\n        {\r\n            method: 'GET'\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            /** `casesData` is the array where the fetched data will be stored in.\r\n              `feed` is the array of objects returned by the request.\r\n              Each array entry has the following schema\r\n              [attributes: {Bundesland: \"\", AnzahlFall: \"\", IdBundesland: \"\", Meldedatum: \"\"}]\r\n              By iterating through `feed` and pushing the objects to `casesData` one depth is removed so\r\n              the data can be handled more easily.\r\n            */\r\n            let casesData = [];\r\n            const feed = data.features;\r\n            feed.forEach(elem => {\r\n              casesData.push(elem.attributes);\r\n            });\r\n\r\n            return groupDataByDate(casesData)\r\n        });\r\n};\r\n\r\n  \r\n/** Groups the received data by date. After the grouping the data is sorted\r\n  datewise and returned as an array\r\n*/\r\nfunction groupDataByDate(casesData){\r\n  /** `dataEntries` is a new object and `currentValue` is the item of the array \r\n    currently looked at\r\n  */\r\n  const groupedReport = casesData.reduce((dataEntries, currentValue) => {\r\n    let day = new Date(currentValue['Meldedatum']);\r\n    \r\n    /** Within the first iteration of `reduce` `dataEntries` is undefined. \r\n      Consequently a new object entry with the `Meldedatum` as the key is being added to\r\n      `dataEntries`. Further information (Bundesland, IdBundesland, AnzahlFall) \r\n      are added as a value.       \r\n    */\r\n    if(dataEntries[day] !== undefined){\r\n      /** If a key with the `Meldedatum` already exists the number of cases are\r\n        summed up.\r\n      */\r\n      dataEntries[day].AnzahlFall = dataEntries[day].AnzahlFall + currentValue.AnzahlFall;  \r\n    } else {\r\n      dataEntries[day] = {\r\n        Bundesland: currentValue.Bundesland,\r\n        IdBundesland: currentValue.IdBundesland,\r\n        AnzahlFall: currentValue.AnzahlFall\r\n      };  \r\n    }        \r\n    return dataEntries\r\n  },{})\r\n\r\n  // `dataEntries` gets transformed into an array so it can be easily sorted by date  \r\n  let reportArr = [];\r\n  Object.entries(groupedReport).forEach(([key, value]) => {\r\n    reportArr.push({Meldedatum: key, Infos: value})\r\n  })\r\n  // Sorts the array containing the summed up cases by `Meldedatum`\r\n  reportArr.sort((a, b) => b.Meldedatum - a.Meldedatum)\r\n  return reportArr;\r\n}\r\n\r\n\r\nfunction addAxes(data){\r\n  /** The next 7 lines initialize and format the labels of the xAxis nicely.    \r\n    If there are too less dates will be repeated on the x-axis. To avoid that we have to create a function \r\n    for that edge case and work with xa.tickValues to set the labels manually.\r\n    xA.tickValues([new Date(data[0].Meldedatum), new Date(data[1].Meldedatum), new Date(data[2].Meldedatum)])\r\n  */\r\n  xAxis = d3.scaleTime()\r\n              .domain(d3.extent(data, item => new Date(item.Meldedatum)))\r\n              .range([0, width]);\r\n  const xA = d3.axisBottom(xAxis);\r\n  xA.tickSizeOuter(0); // removes the last tick on the xAxis\r\n  const parseDate = d3.timeFormat(\"%B %d, %Y\") //https://d3-wiki.readthedocs.io/zh_CN/master/Time-Scales/\r\n  xA.tickFormat(d => parseDate(d));\r\n \r\n  // Appends the xAxis\r\n  svg.append(\"g\")\r\n      .attr(\"transform\", `translate(0, ${height})`)\r\n      .attr(\"class\", \"x-axis\")\r\n      .call(xA)\r\n      .selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(330)\") //rotates the labels of the x axis by \r\n      .style(\"text-anchor\", \"end\"); //makes sure that the end of the text string is anchored to the ticks\r\n\r\n  // Initializes and formats the yAxis\r\n  yAxis = d3.scaleLinear()\r\n      .domain([0, d3.max(data, item => item.Infos.AnzahlFall)])\r\n      .range([height, 0])\r\n      .nice(); //without that the highest tick of the y axis wouldn't be labelled\r\n  \r\n  // Appends the yAxis\r\n  svg.append(\"g\")\r\n      .call(d3.axisLeft(yAxis))\r\n      .attr(\"class\", \"y-axis\"); // Class added to be able to remove the axis;\r\n}\r\n\r\n\r\nfunction visualiseCurve(svg, formattedData, xAxis, yAxis, classN, color){\r\n  svg.append(\"path\")\r\n    .datum(formattedData)\r\n    .attr(\"fill\", \"none\")\r\n    .attr(\"id\", classN+\"-curve\")\r\n    .attr(\"stroke\", color)\r\n    .attr(\"stroke-width\", 1)\r\n    .attr(\"class\", \"curve\" + \" \" + classN) //necessary to add a specific class for every Bundesland shown\r\n    .attr(\"d\", d3.line()\r\n        .x(item => xAxis(new Date(item.Meldedatum)))\r\n        .y(item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n    );\r\n\r\n  // Appends name of the Bundesland to the corresponding path\r\n  svg.append(\"text\")\r\n    .attr(\"x\", 5) // move the text from the start of the path\r\n    .attr(\"dy\", -10) // move the text up\r\n    .append(\"textPath\")\r\n      .attr(\"xlink:href\",\"#\"+classN+\"-curve\") // links the text to the element with the corresponding id, which was given to the path in the code block above\r\n      .text(formattedData[0].Infos.Bundesland);\r\n\r\n  // Appends circles to the path at the dates where data is returned\r\n  svg.selectAll(\"circles\")\r\n      .data(formattedData)\r\n      .enter()\r\n      .append(\"circle\")\r\n        .attr(\"class\", \"circles\" + \" \" + classN)\r\n        .attr(\"fill\", \"darkblue\")\r\n        .attr(\"stroke\", \"none\")\r\n        .attr(\"cx\", item => xAxis(new Date(item.Meldedatum)))\r\n        .attr(\"cy\", item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n        .attr(\"r\", 2)\r\n}\r\n\r\n// Appends a vertical line at the selected date\r\nfunction appendVerticalLine(svg, xAxis, date, height){\r\n  d3.select(\".case-line\").remove(); //removes existing vertical line\r\n\r\n  svg.append(\"line\")\r\n    .attr(\"class\", \"case-line\")\r\n    .attr(\"x1\", xAxis(date))  \r\n    .attr(\"y1\", 0)\r\n    .attr(\"x2\", xAxis(date))  \r\n    .attr(\"y2\", height)\r\n    .style(\"stroke-width\", 1)\r\n    .style(\"stroke\", \"darkblue\")\r\n    .style(\"fill\", \"none\");\r\n}\r\n\r\n\r\nfunction updateExistingCurvesCircles(storageArray){\r\n  storageArray.forEach((arr) => {\r\n    svg.select(\".curve.\"+ arr[0])\r\n      .attr(\"d\", d3.line()\r\n      .x(item => xAxis(new Date(item.Meldedatum)))\r\n      .y(item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n    );\r\n\r\n    svg.selectAll(\".circles.\"+ arr[0])\r\n      .attr(\"cx\", item => xAxis(new Date(item.Meldedatum)))\r\n      .attr(\"cy\", item => yAxis(new Date(item.Infos.AnzahlFall))\r\n    );\r\n  })\r\n}\r\n","export function ToggleDatePicker(event) {\r\n   console.log(event);\r\n  if (!event.target.matches('#datePickerButton')) {\r\n    const dropdowns = document.getElementsByClassName(\"dropdown\");\r\n    for (let i = 0; i < dropdowns.length; i++) {\r\n      let openDropdown = dropdowns[i];\r\n      if (!openDropdown.classList.contains('hidden')) {\r\n        openDropdown.classList.add('hidden');\r\n      }\r\n    }\r\n\r\n  } else {\r\n    document.getElementById(\"dateDropdown\").classList.toggle(\"hidden\");\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction datePicked(month){\r\n  document.getElementById('datePickerButton').textContent = month;\r\n}\r\n\r\nexport function GetDateForFetch(){\r\n  switch (document.getElementById('datePickerButton').textContent) {\r\n    case \"März 2020\":\r\n      return [\"2020-03-01\", \"2020-04-01\"]\r\n    case \"April 2020\":\r\n      return [\"2020-04-01\", \"2020-05-01\"]\r\n    case \"Mai 2020\":\r\n      return [\"2020-05-01\", \"2020-06-01\"]\r\n    case \"Juni 2020\":\r\n      return [\"2020-06-01\", \"2020-07-01\"]\r\n    case \"Juli 2020\":\r\n      return [\"2020-07-01\", \"2020-08-01\"]\r\n    case \"August 2020\":\r\n      return [\"2020-08-01\", \"2020-09-01\"]\r\n    case \"September 2020\":\r\n      return [\"2020-09-01\", \"2020-10-01\"]\r\n    case \"Oktober 2020\":\r\n      return [\"2020-10-01\", \"2020-11-01\"]\r\n    case \"November 2020\":\r\n      return [\"2020-11-01\", \"2020-12-01\"]\r\n    case \"Dezember 2020\":\r\n      return [\"2020-12-01\", \"2021-01-01\"]\r\n    case \"Januar 2021\":\r\n      return [\"2021-01-01\", \"2021-02-01\"]\r\n    case \"Februar 2021\":\r\n      return [\"2021-02-01\", \"2021-03-01\"]\r\n    default:\r\n      return [\"2020-03-01\", \"2020-04-01\"]\r\n  }\r\n\r\n}\r\n","let colorBackground, colorText, blHoovered;\r\n\r\n// `labelBlArray` stores the names of all the Bundesländer which are appended to the svg\r\nlet labelBlArray = [];\r\n\r\n// `clickedBlArray` stores the names of all the Bundesländer which have been selected via click\r\nlet clickedBlArray = [];\r\n\r\n\r\nexport function LoadMap(){\r\n\r\n\t// Source http://opendatalab.de/projects/geojson-utilities/\r\n\td3.json('../src/data/bundeslaender.geojson').then((geojson)=>{\r\n\t\t\t\t\r\n\t\tconst width = 900;\r\n\t\tconst height =500;\r\n\r\n\t\tconst svg = d3  \r\n\t\t\t.select(\"#mapGermany\")\r\n\t\t\t.classed(\"svg-container\", true)   \r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"class\", \"map-germany\")\r\n\t\t\t//.attr(\"preserveAspectRatio\", \"xMinYMin meet\")\r\n          \t//.attr(\"viewBox\", \"0 0 600 400\")\r\n          \t//.classed(\"svg-content-responsive\", true)\r\n\t\t\t.attr(\"id\", \"svgMap\")\r\n\t\t\t.attr(\"width\", width)  \r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\tconst projection = d3.geoMercator();\r\n\t\tprojection.fitSize([width, height],geojson)\r\n\r\n\t\r\n\t\tconst path = d3.geoPath().projection(projection);\r\n\t\tconst color = d3.scaleOrdinal(d3.schemeBlues[9].slice(2,9));\r\n\t\tlet offset = geojson.offset;\r\n\t\t\r\n\t\tsvg.selectAll(\"path\")\r\n\t\t\t.data(geojson.features)\r\n\t\t\t.enter()  \r\n\t\t\t.append(\"path\")  \r\n\t\t\t.attr(\"d\", path) \r\n\t\t\t.attr(\"class\", d => d.properties.GEN) // Sets the name of the Bundesland as the classname\r\n\t\t\t.attr(\"fill\", (d, i) => color(i))  \r\n\t\t\t.attr(\"stroke\", \"#FFF\")  \r\n\t\t\t.attr(\"stroke-width\", 0.5);  \r\n\t\t\t\r\n\r\n\t\tsvg.append(\"g\")  \r\n\t\t\t.selectAll(\"text\")  \r\n\t\t\t.data(geojson.features)  \r\n\t\t\t.enter()  \r\n\t\t\t.append(\"text\")  \r\n\t\t\t.attr(\"text-anchor\", \"middle\") \r\n\t\t\t.attr(\"font-size\", 11)\r\n\t\t\t.attr(\"id\", d => d.properties.GEN) // Sets the name of the Bundesland as the ID\r\n\t\t\t.attr(\"x\", d => {\r\n\t\t\t\tconst bl = d.properties.GEN;\r\n\t\t\t\tif(offset[bl] != undefined) {\r\n\t\t\t\t\treturn projection(offset[bl])[0];\t\r\n\t\t\t\t}\r\n\t\t\t})  \r\n\t\t\t.attr(\"y\", d => {\r\n\t\t\t\tconst bl = d.properties.GEN;\r\n\t\t\t\tif(offset[bl] != undefined) return projection(offset[bl])[1];\r\n\t\t\t})\r\n\t\t\t.text(d => {\r\n\t\t\t\t// Only fill the text if there is no text for the Bundesland yet\r\n\t\t\t\tlet textBool = false;\r\n\t\t\t\tlabelBlArray.forEach(bl => {\r\n\t\t\t\t\tif(bl === d.properties.GEN || d.properties.GEN.includes(\"Bodensee\")) {\r\n\t\t\t\t\t\ttextBool = true; // Bodensee needs to be mentioned explicitly\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif(textBool === false) {\r\n\t\t\t\t\tlabelBlArray.push(d.properties.GEN)\t\r\n\t\t\t\t\treturn d.properties.GEN;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.on(\"mouseover\", highlightBl)\r\n\t\t\t.on(\"mouseout\", resetBlColor)\r\n\t\t\t.on(\"click\", clickEvent)\r\n\t\t\t.style(\"cursor\", \"pointer\");  \r\n\t});\r\n\r\n\t// Hide map\r\n\tdocument.getElementById('mapGermany').style.display = 'none'\r\n}\r\n\r\n\r\nfunction highlightBl(){\r\n\r\n\t// Get the name of the Bundesland currently hoovered over via the ID of the HTML element\r\n\tblHoovered = d3.select(this)._groups[0][0].id\r\n\t\r\n\t// The name of the Bundesland was given as a class name to each path and with its help gets filled now\r\n\tcolorBackground = d3.select(\".\"+blHoovered).attr(\"fill\");\r\n\td3.select(\".\"+blHoovered).attr(\"fill\", \"#009688\");\r\n\r\n\tcolorText = d3.select(this).attr(\"fill\");\r\n\td3.select(this)\r\n\t\t.attr(\"fill\", \"white\")\r\n\t\t.attr(\"font-weight\", \"bold\");\t\t\r\n}\r\n\r\nfunction resetBlColor(){\r\n\t// Check if the hovered over Bundesland was clicked\r\n\tlet isBlClicked = false;\r\n\tclickedBlArray.forEach( bl => {\r\n\t\tif(this.id === bl){\r\n\t\t\tisBlClicked = true;\r\n\t\t}\r\n\t})\r\n\t// If it wasn't clicked its color is reset\r\n\tif(isBlClicked === false){\r\n\t\td3.select(\".\"+blHoovered).attr(\"fill\", colorBackground);\r\n\t\td3.select(this)\r\n\t\t.attr(\"fill\", colorText)\r\n\t\t.attr(\"font-weight\", \"normal\");\t\r\n\t}\r\n}\r\n\r\nfunction clickEvent(){\r\n\tconst clickedBl = d3.select(this)._groups[0][0].id;\r\n\r\n\t// Check if a Bundesland has already been clicked\r\n\tlet clickedBool = false;\r\n\t\r\n\tclickedBlArray.forEach( bl => {\r\n\t\tif(bl === clickedBl){\r\n\t\t\tclickedBool = true;\r\n\t\t}\r\n\t})\r\n\r\n\t// If the clicked on Bundesland wasn't clicked before, it is marked and added to `clickedBlArray`\r\n\tif(clickedBool === false & clickedBlArray.length <= 3) {\r\n\t\td3.select(\".\"+d3.select(this)._groups[0][0].id)\r\n\t\t\t.attr(\"fill\", \"#009688\")\r\n\r\n\t\tclickedBlArray.push(blHoovered);\r\n\t\t// Necessary to get the selected Bundesland in main.js\r\n\t\td3.select(this)._groups[0][0].classList.add('selected-bl'); \r\n\t} \r\n\t/** If it has been clicked before the selection is revoked by changing the stroke coloring and removing the \r\n\t\tBundesland from the array.\r\n\t*/\r\n\telse if(clickedBool === true){\t\r\n\t\td3.select(\".\"+d3.select(this)._groups[0][0].id)\r\n\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t.attr(\"fill\", colorBackground)\r\n\t\t\t.attr(\"stroke-width\", 0.5) \r\n\r\n\t\tconst index = clickedBlArray.indexOf(clickedBl);\r\n\t\tclickedBlArray.splice(index, 1);\r\n\t\t// Necessary to get the selected Bundesland in main.js\r\n\t\td3.select(this)._groups[0][0].classList.remove('selected-bl'); \r\n\t} \r\n\t// Alert when more when the user wants to select more than 4 Bundesländer. This would get too messy for the line chart.\r\n\telse if(clickedBlArray.length == 4){\r\n\t\talert(\"Du hast bereits 5 Bundesländer ausgewählt. Entferne eins per Klick, um ein neues auswählen zu können.\")\r\n\t}\r\n}","import { InitializeSVG, VisualiseChosenBL } from './scripts/lineChartView.js';\r\nimport { ToggleDatePicker, GetDateForFetch } from './scripts/datePicker.js';\r\nimport { LoadMap } from './scripts/mapGermany.js';\r\n\r\nconst mapButton = document.getElementById('mapButton');\r\nconst datePickerButton = document.getElementById('datePickerButton');\r\nconst dateButton = document.getElementsByClassName('date');\r\nvar selectedBL = [];\r\nvar checked;\r\n\r\n\r\nfunction InitialiseEvents(){\r\n\r\n    // Initially load map. The map gets hidden in mapGermany.js \r\n    LoadMap();\r\n\r\n    // Adds and event listener to the Bundesländer Button\r\n    eventListenerMap();\r\n\r\n    //Adds event listener on datePickerButton and each droopdown DateButton element\r\n    eventListenerDatePicker();\r\n\r\n      \r\n}\r\n\r\nfunction eventListenerDatePicker() {\r\n  datePickerButton.addEventListener('click', () => {\r\n    document.getElementById(\"dateDropdown\").classList.toggle(\"hidden\");\r\n  } \r\n  );\r\n  Array.prototype.forEach.call(dateButton, function(date){\r\n    date.addEventListener('click', ()=> {\r\n      datePickerButton.textContent = date.textContent;\r\n      date.classList.add(\"selectedDate\");\r\n      selectedBL.forEach((bl) => {\r\n        updateLineChart(bl);\r\n      })\r\n    })\r\n\r\n  });\r\n}\r\n\r\nfunction eventListenerMap(){\r\n    let mapButtonClicked = true;\r\n    mapButton.addEventListener('click', () => {\r\n        \r\n        /** If the map button is clicked, one or more Bundesländer can be selected and will \r\n            then be displayed\r\n        */\r\n        if(mapButtonClicked === true){\r\n            visualizeSelectedBl()\r\n            document.getElementById('mapGermany').style.display = 'inline';\r\n            mapButtonClicked = false;    \r\n        } \r\n        else if(mapButtonClicked === false){\r\n            document.getElementById('mapGermany').style.display = 'none';\r\n            mapButtonClicked = true;\r\n        }\r\n               \r\n    })\r\n}\r\n\r\n\r\nfunction visualizeSelectedBl(){\r\n    const mapSelectedBl = document.getElementsByTagName('text');\r\n    console.log(selectedBL);\r\n        /** MutationObserver looks at all the html text elements and has a look if their\r\n            attributes changed. If the class attribute changed to `selected-bl` a new Bundesland\r\n            has been selected in the map\r\n        */\r\n        const observer = new MutationObserver((mutations) => {\r\n            mutations.forEach((mutation) => {\r\n                if(mutation.attributeName === 'class'){\r\n                   \r\n                    if(mutation.target.classList[0] === 'selected-bl'){\r\n                        checked = true;\r\n                    } else if(mutation.target.classList[0] ==='date'){\r\n                      console.log(\"datePicked\");\r\n                    }else {\r\n                        checked = false;\r\n                    } \r\n                    selectedBL.push(mutation.target.id);\r\n                    updateLineChart(mutation.target.id)            \r\n                }\r\n            })  \r\n        }) \r\n    const config = { attributes: true };\r\n    \r\n    for (let blMap of mapSelectedBl){\r\n        observer.observe(blMap, config);    \r\n    }\r\n}\r\n\r\nfunction updateLineChart(bl){\r\n    /** Adds the curve for the selected Bundesland to the line chart\r\n        `checked` indicates if the mutated element was a Bundesland selected on the map.\r\n        It is `false` if another element mutated somehow.\r\n    */\r\n    VisualiseChosenBL(bl, checked, GetDateForFetch());\r\n}\r\n\r\n\r\n\r\nInitializeSVG();\r\nInitialiseEvents();\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}