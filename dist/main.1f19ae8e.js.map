{"version":3,"sources":["scripts/lineChartView.js","scripts/datePicker.js","scripts/treeChartView.js","main.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["exportDate","Date","svg","xAxis","yAxis","blDomainStorage","margin","top","right","bottom","left","width","height","selectedMonth","visualiseChosenBL","checkboxes","checkbox","foundBL","foundDate","forEach","arr","value","checked","fetchData","then","data","neededYValue","d3","scaleLinear","domain","max","item","Infos","AnzahlFall","sort","a","b","length","select","remove","addAxes","push","Bundesland","blClassN","visualiseCurve","updateExistingCurvesCircles","selectAll","i","splice","initializeSVG","append","classed","attr","bundesland","fetch","method","response","json","casesData","feed","features","elem","attributes","groupDataByDate","groupedReport","reduce","dataEntries","currentValue","day","undefined","IdBundesland","reportArr","Object","entries","key","Meldedatum","scaleTime","extent","range","xA","axisBottom","tickSizeOuter","parseDate","timeFormat","tickFormat","d","call","style","labels","on","mouseEvent","target","date","appendVerticalLine","nice","axisLeft","formattedData","classN","color","datum","line","x","y","text","enter","storageArray","exports","toggleDatePicker","event","cb","matches","dropdowns","document","getElementsByClassName","openDropdown","classList","contains","add","datePicked","textContent","getElementById","toggle","month","getDateForFetch","displaymobilitydata","param","mobilityData","temp","csv","element","country","console","log","m","div","s","parseFloat","toFixed","createTreeChart","groupedData","k","v","hgroup","hierarchy","Germany","sum","treemap","size","padding","scale","linear","leaves","id","x0","y0","x1","y1","region","lineChartView","require","datePicker","treeChartView","initialiseEvents","window","onclick","updateLineChart","addEventListener","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","Array","isArray","concat","Function","deps","cached","cache","some"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["/** `exportDate` is set in the event handler added to the ticks of the xAxis. \r\n  It contains the selected date which should be used for the treemap.\r\n  To import the clicked date use `import date from './lineChartView.js' in the treemap file`.\r\n  Make sure that the type of the treemap file is set to `module` in the index.html file, e.g.:\r\n   <script type=\"module\" src=\"scripts/values.js\" ></script>\r\n  */\r\nlet exportDate = new Date();\r\nexport default exportDate;\r\n\r\nlet svg, xAxis, yAxis;\r\nconst blDomainStorage = [];\r\n\r\nconst margin = {top:10, right: 30, bottom: 60, left: 60},\r\n  width = 800 - margin.left - margin.right,\r\n  height = 400 - margin.top - margin.bottom;\r\n\r\nlet selectedMonth;\r\n/** Saves the checked checkboxes to the array `blDomainStorage` \r\n  and visualises the chosen Bundesland.\r\n*/\r\nfunction visualiseChosenBL(checkboxes, selectedMonth){\r\n  \r\n// Pushes the names of the chosen Bundesland into the array `blDomainStorage`\r\n  for (let checkbox of checkboxes){\r\n    \r\n    \r\n    let foundBL = false;\r\n    let foundDate = false;\r\n    blDomainStorage.forEach(arr => {\r\n      if(checkbox.value == arr[0]) foundBL = true;\r\n    })\r\n   \r\n    if(this.selectedMonth == selectedMonth) foundDate = true;\r\n    // Checks if Bundesland is newly checked or if it already exists in blDomainStorage\r\n    if(checkbox.checked && foundBL == false ){\r\n\r\n     \r\n      // Fetching the data of the newly selected Bundesland\r\n      fetchData(checkbox.value, selectedMonth).then((data) => {\r\n\r\n        // To figure out the max y-value which is necessary to correctly display the data\r\n        const neededYValue = d3.scaleLinear().domain([0, d3.max(data, item => item.Infos.AnzahlFall)])\r\n \r\n        /** Sorts the array in increasing order.\r\n          The Bundesland with the smallest needed y-value comes first and the one with the highest comes last.\r\n        */\r\n        blDomainStorage.sort((a,b) => {\r\n          return a[1] - b[1];\r\n        })\r\n\r\n        /** Checks whether the last Bundesland in `blDomainStorage` still obtains the highest needed\r\n          y-value compared to the newly selected Bundesland. If the newly checked Bundesland has\r\n          more Covid cases and therefore needs a higher y-value the current axes are removed \r\n          and the updated ones are added.\r\n        */\r\n        if(blDomainStorage.length == 0 || blDomainStorage[blDomainStorage.length-1][1] < neededYValue.domain()[1]){\r\n          svg.select(\".y-axis\").remove(); // instead of deleting they should be updated,\r\n          svg.select(\".x-axis\").remove(); // but that seems more complicated\r\n          svg.select(\".case-line\").remove(); //removes existing vertical line\r\n          addAxes(data);\r\n        }\r\n      \r\n        // Stores the Bundesland and the highest y-value needed for that Bundesland\r\n        blDomainStorage.push([data[0].Infos.Bundesland, neededYValue.domain()[1]]);   \r\n\r\n        /** The curve of the newly selected Bundesland is added.\r\n          `blClassN` is necessary to give each curve a distinguishable class name.\r\n          It will be used to select the d3 element and then to update and delete it.\r\n        */\r\n        const blClassN = data[0].Infos.Bundesland\r\n        visualiseCurve(svg, data, xAxis, yAxis, blClassN, \"turquoise\");\r\n          \r\n        // Circles of the already displayed Bundesländer are updated according to the new axis. \r\n        updateExistingCurvesCircles(blDomainStorage);\r\n      })\r\n      \r\n    } else if(!checkbox.checked && foundBL == true) {\r\n\r\n        // Removes the curve and circles of the recently unselected Bundesland.\r\n        svg.select(\".curve.\"+checkbox.value).remove();\r\n        svg.selectAll(\".circles.\"+checkbox.value).remove();\r\n\r\n       /** Sorts the array in increasing order.\r\n          The Bundesland with the smallest needed y-value comes first and the one with the \r\n          highest comes last.\r\n        */\r\n        blDomainStorage.sort((a,b) => {\r\n          return a[1] - b[1];\r\n        })\r\n\r\n        // Removes the recently unselected Bundesland from `blDomainStorage`\r\n        blDomainStorage.forEach((arr, i) => {\r\n          if(arr[0] == checkbox.value) {\r\n           blDomainStorage.splice(i,1)\r\n          }\r\n        })\r\n\r\n        /** Updates the axes, the existing curves and circles if the highest needed y-value \r\n          has changed after unselecting a Bundesland\r\n        */\r\n        if(yAxis.domain()[1] > blDomainStorage[blDomainStorage.length-1][1]){\r\n          fetchData(blDomainStorage[blDomainStorage.length-1][0], selectedMonth).then((data) => {\r\n            svg.select(\".y-axis\").remove(); \r\n            svg.select(\".x-axis\").remove(); \r\n            svg.select(\".case-line\").remove(); //removes existing vertical line\r\n\r\n            addAxes(data)\r\n            updateExistingCurvesCircles(blDomainStorage);            \r\n          }) \r\n        } \r\n      }\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction initializeSVG(){\r\n  svg = d3.select(\"#visualisationContainer\")\r\n          .append(\"div\")\r\n          .classed(\"svg-container\", true) \r\n          .append(\"svg\")\r\n          .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\r\n          .attr(\"viewBox\", \"0 0 600 400\")\r\n          .classed(\"svg-content-responsive\", true)\r\n          .append(\"g\")\r\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);             \r\n}\r\n\r\n\r\nfunction fetchData(bundesland, selectedMonth){\r\n    return fetch(\r\n      `https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0/query?where=Meldedatum%20%3E%3D%20TIMESTAMP%20%27${selectedMonth[0]}%2000%3A00%3A00%27%20AND%20Meldedatum%20%3C%3D%20TIMESTAMP%20%27${selectedMonth[1]}%2000%3A00%3A00%27%20AND%20Bundesland%20%3D%20%27${bundesland}%27&outFields=Bundesland,AnzahlFall,Meldedatum,IdBundesland&outSR=4326&f=json`,\r\n        {\r\n            method: 'GET'\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            /** `casesData` is the array where the fetched data will be stored in.\r\n              `feed` is the array of objects returned by the request.\r\n              Each array entry has the following schema\r\n              [attributes: {Bundesland: \"\", AnzahlFall: \"\", IdBundesland: \"\", Meldedatum: \"\"}]\r\n              By iterating through `feed` and pushing the objects to `casesData` one depth is removed so\r\n              the data can be handled more easily.\r\n            */\r\n            let casesData = [];\r\n            const feed = data.features;\r\n            feed.forEach(elem => {\r\n              casesData.push(elem.attributes);\r\n            });\r\n            return groupDataByDate(casesData)\r\n        });\r\n};\r\n\r\n  \r\n/** Groups the received data by date. After the grouping the data is sorted\r\n  datewise and returned as an array\r\n*/\r\nfunction groupDataByDate(casesData){\r\n  /** `dataEntries` is a new object and `currentValue` is the item of the array \r\n    currently looked at\r\n  */\r\n  const groupedReport = casesData.reduce((dataEntries, currentValue) => {\r\n    let day = new Date(currentValue['Meldedatum']);\r\n    \r\n    /** Within the first iteration of `reduce` `dataEntries` is undefined. \r\n      Consequently a new object entry with the `Meldedatum` as the key is being added to\r\n      `dataEntries`. Further information (Bundesland, IdBundesland, AnzahlFall) \r\n      are added as a value.       \r\n    */\r\n    if(dataEntries[day] !== undefined){\r\n      /** If a key with the `Meldedatum` already exists the number of cases are\r\n        summed up.\r\n      */\r\n      dataEntries[day].AnzahlFall = dataEntries[day].AnzahlFall + currentValue.AnzahlFall;  \r\n    } else {\r\n      dataEntries[day] = {\r\n        Bundesland: currentValue.Bundesland,\r\n        IdBundesland: currentValue.IdBundesland,\r\n        AnzahlFall: currentValue.AnzahlFall\r\n      };  \r\n    }        \r\n    return dataEntries\r\n  },{})\r\n\r\n  // `dataEntries` gets transformed into an array so it can be easily sorted by date  \r\n  let reportArr = [];\r\n  Object.entries(groupedReport).forEach(([key, value]) => {\r\n    reportArr.push({Meldedatum: key, Infos: value})\r\n  })\r\n  // Sorts the array containing the summed up cases by `Meldedatum`\r\n  reportArr.sort((a, b) => b.Meldedatum - a.Meldedatum)\r\n  return reportArr;\r\n}\r\n\r\n\r\nfunction addAxes(data){\r\n  /** The next 7 lines initialize and format the labels of the xAxis nicely.    \r\n    If there are too less dates will be repeated on the x-axis. To avoid that we have to create a function \r\n    for that edge case and work with xa.tickValues to set the labels manually.\r\n    xA.tickValues([new Date(data[0].Meldedatum), new Date(data[1].Meldedatum), new Date(data[2].Meldedatum)])\r\n  */\r\n  xAxis = d3.scaleTime()\r\n              .domain(d3.extent(data, item => new Date(item.Meldedatum)))\r\n              .range([0, width]);\r\n  const xA = d3.axisBottom(xAxis);\r\n  xA.tickSizeOuter(0); // removes the last tick on the xAxis\r\n  const parseDate = d3.timeFormat(\"%B %d, %Y\") //https://d3-wiki.readthedocs.io/zh_CN/master/Time-Scales/\r\n  xA.tickFormat(d => parseDate(d));\r\n \r\n  // Appends the xAxis\r\n  svg.append(\"g\")\r\n      .attr(\"transform\", `translate(0, ${height})`)\r\n      .attr(\"class\", \"x-axis\")\r\n      .call(xA)\r\n      .selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(330)\") //rotates the labels of the x axis by \r\n      .style(\"text-anchor\", \"end\"); //makes sure that the end of the text string is anchored to the ticks\r\n\r\n   /** Selects all the labels on the xAxis. \r\n    The cursor becomes a pointer when moving the mouse over the xAxis labels.\r\n    When clicking on one label the function `appendVerticalLine` is being called \r\n    and the selected `date` set so it can be exported. (See top of this file)\r\n  */\r\n  const labels = d3.selectAll('g.tick') \r\n  \r\n  labels.on(\"mouseover\", (mouseEvent) => {\r\n    d3.select(mouseEvent.target).style(\"cursor\", \"pointer\"); // the pointer isn't visible anymore for some reason\r\n  });\r\n  labels.on(\"click\", (mouseEvent, date) => {\r\n    appendVerticalLine(svg, xAxis, date, height)\r\n    exportDate = date;\r\n  })  \r\n\r\n  // Initializes and formats the yAxis\r\n  yAxis = d3.scaleLinear()\r\n      .domain([0, d3.max(data, item => item.Infos.AnzahlFall)])\r\n      .range([height, 0])\r\n      .nice(); //without that the highest tick of the y axis wouldn't be labelled\r\n  \r\n  // Appends the yAxis\r\n  svg.append(\"g\")\r\n      .call(d3.axisLeft(yAxis))\r\n      .attr(\"class\", \"y-axis\"); // Class added to be able to remove the axis;\r\n}\r\n\r\n\r\nfunction visualiseCurve(svg, formattedData, xAxis, yAxis, classN, color){\r\n  svg.append(\"path\")\r\n    .datum(formattedData)\r\n    .attr(\"fill\", \"none\")\r\n    .attr(\"id\", classN)\r\n    .attr(\"stroke\", color)\r\n    .attr(\"stroke-width\", 1)\r\n    .attr(\"class\", \"curve\" + \" \" + classN) //necessary to add a specific class for every Bundesland shown\r\n    .attr(\"d\", d3.line()\r\n        .x(item => xAxis(new Date(item.Meldedatum)))\r\n        .y(item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n    );\r\n\r\n  // Appends name of the Bundesland to the corresponding path\r\n  svg.append(\"text\")\r\n    .attr(\"x\", 5) // move the text from the start of the path\r\n    .attr(\"dy\", 15) // move the text down\r\n    .append(\"textPath\")\r\n      .attr(\"xlink:href\",\"#\"+classN)\r\n      .text(formattedData[0].Infos.Bundesland);\r\n\r\n  // Appends circles to the path at the dates where data is returned\r\n  svg.selectAll(\"circles\")\r\n      .data(formattedData)\r\n      .enter()\r\n      .append(\"circle\")\r\n        .attr(\"class\", \"circles\" + \" \" + classN)\r\n        .attr(\"fill\", \"darkblue\")\r\n        .attr(\"stroke\", \"none\")\r\n        .attr(\"cx\", item => xAxis(new Date(item.Meldedatum)))\r\n        .attr(\"cy\", item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n        .attr(\"r\", 2)\r\n}\r\n\r\n// Appends a vertical line at the selected date\r\nfunction appendVerticalLine(svg, xAxis, date, height){\r\n  d3.select(\".case-line\").remove(); //removes existing vertical line\r\n\r\n  svg.append(\"line\")\r\n    .attr(\"class\", \"case-line\")\r\n    .attr(\"x1\", xAxis(date))  \r\n    .attr(\"y1\", 0)\r\n    .attr(\"x2\", xAxis(date))  \r\n    .attr(\"y2\", height)\r\n    .style(\"stroke-width\", 1)\r\n    .style(\"stroke\", \"darkblue\")\r\n    .style(\"fill\", \"none\");\r\n}\r\n\r\n\r\nfunction updateExistingCurvesCircles(storageArray){\r\n  storageArray.forEach((arr) => {\r\n    svg.select(\".curve.\"+ arr[0])\r\n      .attr(\"d\", d3.line()\r\n      .x(item => xAxis(new Date(item.Meldedatum)))\r\n      .y(item => yAxis(new Date(item.Infos.AnzahlFall)))\r\n    );\r\n\r\n    svg.selectAll(\".circles.\"+ arr[0])\r\n      .attr(\"cx\", item => xAxis(new Date(item.Meldedatum)))\r\n      .attr(\"cy\", item => yAxis(new Date(item.Infos.AnzahlFall))\r\n    );\r\n  })\r\n}\r\n\r\n\r\nexports.initializeSVG = initializeSVG;\r\nexports.visualiseChosenBL = visualiseChosenBL;","\r\n  function toggleDatePicker(event, cb) {\r\n    if (!event.target.matches('#datePickerButton')) {\r\n      var dropdowns = document.getElementsByClassName(\"dropdown\");\r\n      var i;\r\n      for (i = 0; i < dropdowns.length; i++) {\r\n        var openDropdown = dropdowns[i];\r\n        if (!openDropdown.classList.contains('hidden')) {\r\n          openDropdown.classList.add('hidden');\r\n        }\r\n      }\r\n      if(event.target.matches('.date')){\r\n        datePicked(event.target.textContent);\r\n        cb();\r\n      }\r\n    \r\n    } else {\r\n      document.getElementById(\"dateDropdown\").classList.toggle(\"hidden\");\r\n    }\r\n    \r\n}\r\n  \r\n\r\n  function datePicked(month){\r\n    document.getElementById('datePickerButton').textContent = month;\r\n  }\r\n\r\n  function getDateForFetch(){\r\n\r\n    switch (document.getElementById('datePickerButton').textContent) {\r\n      case \"März 2020\":\r\n        return [\"2020-03-01\", \"2020-04-01\"]\r\n      case \"April 2020\":\r\n        return [\"2020-04-01\", \"2020-05-01\"]\r\n      case \"Mai 2020\":\r\n        return [\"2020-05-01\", \"2020-06-01\"]\r\n      case \"Juni 2020\":\r\n        return [\"2020-06-01\", \"2020-07-01\"]\r\n      case \"Juli 2020\":\r\n        return [\"2020-07-01\", \"2020-08-01\"]\r\n      case \"August 2020\":\r\n        return [\"2020-08-01\", \"2020-09-01\"]\r\n      case \"September 2020\":\r\n        return [\"2020-09-01\", \"2020-10-01\"]\r\n      case \"Oktober 2020\":\r\n        return [\"2020-10-01\", \"2020-11-01\"]\r\n      case \"November 2020\":\r\n        return [\"2020-11-01\", \"2020-12-01\"]\r\n      case \"Dezember 2020\":\r\n        return [\"2020-12-01\", \"2021-01-01\"]\r\n      case \"Januar 2021\":\r\n        return [\"2021-01-01\", \"2021-02-01\"]\r\n      case \"Februar 2021\":\r\n        return [\"2021-02-01\", \"2021-03-01\"]\r\n      default:\r\n        return [\"2020-03-01\", \"2020-04-01\"]\r\n    }\r\n  }\r\n\r\n  exports.getDateForFetch = getDateForFetch;\r\n  exports.toggleDatePicker = toggleDatePicker;\r\n","function displaymobilitydata(param=\"driving\"){\r\n    let mobilityData = [];\r\n    var temp = [];\r\n    d3.csv('../src/data/applemobilitytrends.csv').then(function(data){\r\n        data.forEach(element => temp.push(element));\r\n        temp.forEach(function(element) {\r\n            if (element.country == \"Germany\" && element[\"sub-region\"] == \"\" && element[\"transportation_type\"]==param) mobilityData.push(element);\r\n        });\r\n        console.log(data);\r\n        console.log(temp);\r\n        //calculate average value for every month\r\n        for (let m=1; m<13; m++){\r\n\r\n            //since each month has a different number of days and the data has some gaps for two days we need to store the individual number of days each month in the variable div\r\n            let div = 0;\r\n\r\n            // if clause to make the month valuefitting to the formatting in the dataset\r\n            if (m<10) month=\"0\"+m;\r\n            else month=m;\r\n\r\n            for (let d=1; d<32; d++){\r\n\r\n                // if clause to make the day value fitting to the formatting in the dataset\r\n                if (d<10) day=\"0\"+d;\r\n                else day=d;\r\n\r\n                //format of the date stored in a variable\r\n                let s = \"2020-\"+month+\"-\"+day;\r\n\r\n                mobilityData.forEach(function(element){\r\n                    if (element[s] !== undefined && element[s] !== \"\") {\r\n                        div++;\r\n                        if (element[month]== null) element[month]= element[s];\r\n\r\n                        else {element[month]= parseFloat(element[month]) + parseFloat(element[s]);}\r\n                    }\r\n                });\r\n            }\r\n\r\n            //div needs to be divided by 16 since it gets count up in the forEach loop for all 16 German regions\r\n            div = div/16;\r\n\r\n            mobilityData.forEach(function(element){\r\n                element[month]=(parseFloat(element[month])/div).toFixed(2);\r\n            });\r\n        }\r\n\r\n        //generate TreeChart from the provided Dateset\r\n        createTreeChart(mobilityData)\r\n    });\r\n};\r\n\r\n//displaymobilitydata();\r\n\r\nfunction createTreeChart(data){\r\n\r\n    //in case new treemap shall be loaded, the one before gets removed\r\n    d3.select(\"#treemapwrapper\").select(\"svg\").remove();\r\n\r\n    var margin = {top: 20, right: 30, bottom: 30, left: 40},\r\n        width = 800 - margin.left - margin.right,\r\n        height = 600 - margin.top - margin.bottom;\r\n\r\n    var svg = d3.select(\"#treemapwrapper\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" +margin.left + \",\" + margin.top + \")\");\r\n\r\n    //Group the data by \"Germany\", so our tree has a root node\r\n    let groupedData = data.reduce((k, v)=> {\r\n        k[v.country] = [...k[v.country] || [], v];\r\n        return k;\r\n        }, {});\r\n\r\n\r\n    //Transform the data grouped by \"Germany\" into a hiearchy by usind d3.js hierachy (first param is root, second param is child nodes\r\n    var hgroup = d3.hierarchy(groupedData, function(d){return d.Germany})\r\n        .sum((d) => {return d[\"12\"]});\r\n\r\n    // Then d3.treemap computes the position of each element of the hierarchy\r\n    // The coordinates are added to the root object above\r\n   const treemap= d3.treemap()\r\n       .size([width, height])\r\n       .padding(4)\r\n      (hgroup)\r\n\r\n\r\n    // Determine the color of each field\r\n    // Explanation from https://stackoverflow.com/questions/42546344/how-to-apply-specific-colors-to-d3-js-map-based-on-data-values?rq=1\r\n    var color= d3.scale.linear().domain([70, 100]).range([\"blue\", \"green\"]);\r\n\r\n    // use this information to add rectangles:\r\n    svg\r\n        .selectAll(\"rect\")\r\n        .data(treemap.leaves())\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"id\", (d) =>{return d.id;})\r\n        .attr('x', function (d) { return d.x0; })\r\n        .attr('y', function (d) { return d.y0})\r\n        .attr('width', function (d) { return d.x1 - d.x0; })\r\n        .attr('height', function (d) { return d.y1 - d.y0})\r\n        .style(\"fill\", function(d) {\r\n            return color(d.data[\"05\"]);});\r\n\r\n    // and to add the text labels\r\n    svg\r\n        .selectAll(\"text\")\r\n        .data(treemap.leaves())\r\n        .enter()\r\n        .append(\"text\")\r\n        .attr(\"x\", function(d){ return d.x0+20})    // +10 to adjust position (more right)\r\n        .attr(\"y\", function(d){ return d.y0+30})    // +20 to adjust position (lower)\r\n        .text(function(d){ return d.data.region +\"\"+ d.data[\"05\"]+\"%\"})\r\n        .attr(\"font-size\", \"16px\")\r\n        .attr(\"fill\", \"white\")\r\n}\r\n\r\nexports.displaymobilitydata = displaymobilitydata;\r\n","const lineChartView = require(\"./scripts/lineChartView.js\");\r\nconst datePicker = require(\"./scripts/datePicker.js\");\r\nconst treeChartView = require(\"./scripts/treeChartView.js\");\r\n    // This is the entry point for the Bundesländer select via the treemap later on\r\nconst checkboxes = document.getElementsByClassName('checkbox');\r\n\r\n\r\n\r\nfunction initialiseEvents(){\r\n  window.onclick = function(event) {\r\n    datePicker.toggleDatePicker(event, updateLineChart);\r\n  }\r\n  document.getElementById(\"carButton\").addEventListener(\"click\", log);\r\n  for (let checkbox of checkboxes){\r\n    checkbox.addEventListener('change', () => {\r\n        updateLineChart();\r\n    });\r\n}\r\n}\r\n\r\nfunction log (){\r\n  treeChartView.displaymobilitydata(\"driving\");\r\n  console.log(\"car clicked\");\r\n}\r\n\r\nfunction updateLineChart(){\r\n    lineChartView.visualiseChosenBL(checkboxes, datePicker.getDateForFetch());\r\n}\r\n\r\n\r\n\r\nlineChartView.initializeSVG();\r\ninitialiseEvents();\r\n\r\n\r\n\r\n\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}